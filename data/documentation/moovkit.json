{"sections":[],"variants":[{"paths":["\/documentation\/moovkit"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"numberOfColumns":2,"type":"row","columns":[{"size":1,"content":[{"inlineContent":[{"type":"text","text":"The MoovKit SDK empowers app developers to seamlessly integrate contactless card payment acceptance into their applications using Tap to Pay on iPhone, all supported by the trusted and secure infrastructure of Moov."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"moov","type":"image"}],"type":"paragraph"}],"size":1}]},{"type":"heading","level":2,"anchor":"Getting-Started","text":"Getting Started"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"In your app Target under Frameworks, Libraries and Embedded content make sure that ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"MoovKit","type":"text"}]},{"text":" is set to Embed & Sign.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Link Binary With Libraries make sure that "},{"inlineContent":[{"text":"MoovKit","type":"text"}],"type":"emphasis"},{"text":" is listed as a library to link with.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Create an entitlements file in the top level of your Xcode project:","type":"text"}]},{"code":["<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version=\"1.0\">","<dict>","    <key>com.apple.developer.proximity-reader.payment.acceptance<\/key>","    <true\/>","<\/dict>","<\/plist>"],"syntax":"xml","type":"codeListing"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Import the SDK in your source:"}]},{"syntax":"swift","code":["    import MoovKit"],"type":"codeListing"}]},{"content":[{"inlineContent":[{"type":"text","text":"Implement a terminal configuration provider and inject it into the Moov instance. The terminal configuration will need to be acquired by your backend and sent to your iPhone app. To get you started, you can ask Moov to provide you with a terminal configuration that is valid for 48 hours and you can hardcode it into your application using a static terminal configuration provider."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["    static let terminalConfigurationProvider = StaticTerminalConfigurationProvider(terminalConfiguration: \"eyJjYXJkUmVhZGVyVG9rZW4iOiJleUpoYkdjaU9pSkZVekkxTmlJc0ltdHBaQ0k2SWpJeE56UmhZamcyTFRCaVpEVXRORGM0TWkxaU56RTJMVEUyWldVd1l6TXpOalptTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKaGRXUWlPaUpqWlhKMGFXWnBZMkYwYVc5dUxYQnZjeTEyTVNJc0ltVjRjQ0k2TVRjek56RTBPVFkyTml3aWFXRjBJam94TnpNMk9UYzJPRFkyTENKcWRHa2lPaUkyT0dSa1pERTRPQzFpTnpaakxUUm1OMk10T1RZME5pMWhPVEUzT1dWaFltTTFPVEFpTENKdFltNGlPaUpEYkdGemMySnZiMnRsY2lJc0ltMWpZeUk2TVRBd01Dd2liV2xrSWpvaU1USXpORFUyTnpnNU1ERXlNelExSWl3aWRIQnBaQ0k2SWpSak9EUXdNREF3TFRBd01EQXRNREF3TUMwd1pESmhMVGxpWXpRMk56TXpZbVpqTmlKOS5aakZlbjFURnNxNUhLR2ZEektienBZLWhpcjVCb3NpSVNGeHNJRzdxTEZZT09vUWNua2tzaWxab2FwM2RNbmU1VXB0bzFuckVQNkZnYjZYQjdZbDFiQSJ9\")","","    let moov = Moov(partnerAccountId: UUID().uuidString.lowercased(), terminalConfigProvider: terminalConfigurationProvider, networkService: networkService)"]}]},{"content":[{"inlineContent":[{"type":"text","text":"Register an event handler to get notified of events related to Tap to Pay."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["    moov.eventHandler = { event  in","        if case .updateProgress(let progress) = event {","            logger.info(\"Event \\(event.rawValue): \\(progress)\")","        } else {","            logger.info(\"Event \\(event.rawValue)\")","        }","    }"]}]},{"content":[{"inlineContent":[{"text":"Initialize a reader.","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["    do {","        let identifier = try await moov.initReader()","        logger.debug(\"identifier \\(String(describing: identifier))\")","    } catch {","        logger.error(\"Failed to fetch identifier\")","    }"]}]},{"content":[{"inlineContent":[{"type":"text","text":"Create a payment session after the reader is initialized. The session will check if the merchant has already accepted the Terms & Conditions. If not, the T&C view will be presented and needs to be accepted before a tap to pay can be used."}],"type":"paragraph"},{"code":["    do {","        try await moov.createSession()","        print(\"Session successfully created.\")                ","    } catch {","        showError(message: error.localizedDescription)","    }"],"type":"codeListing","syntax":"swift"}]},{"content":[{"inlineContent":[{"type":"text","text":"This is how you read a card after a session has been created. The card read returns a payment method token that will be used in an API call to Moovâ€™s transfer creation API endpoint."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["    do {","        let amt = amount","        let paymentMethodToken = try await moov.createTapAuthorization(","            for: amt,","            currencyCode: \"USD\",","            transactionType: .purchase,","            customerAccountID: UUID().uuidString.lowercased()","        )","        ","        let encoder = JSONEncoder()","        encoder.outputFormatting = .prettyPrinted","        let jsonData = try encoder.encode(paymentMethodToken)","        ","        if let jsonString = String(data: jsonData, encoding: .utf8) {","            logger.debug(\"\\(jsonString)\")","        }","    } catch {","        logger.error(\"Card read error: \\(error)\")","        showError(message: error.localizedDescription)","    }"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In sandbox mode only cards listed on "},{"isActive":true,"type":"reference","identifier":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/"},{"type":"text","text":" can be used to test the Tap to Pay functionality with. The card numbers listed on this page can be added to a Wallet app of an iPhone. The iPhone needs to be logged into a Sandbox developer account. To register Sandbox developer account visit "},{"type":"reference","identifier":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","isActive":true},{"text":" in the Apple Developer Account of your organization.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Have fun tapping! ðŸŽ‰"}],"type":"paragraph"}]}],"type":"orderedList"}]}],"metadata":{"roleHeading":"Framework","role":"collection","title":"MoovKit","externalID":"MoovKit","symbolKind":"module","modules":[{"name":"MoovKit"}]},"kind":"symbol","hierarchy":{"paths":[[]]},"schemaVersion":{"patch":0,"major":0,"minor":3},"identifier":{"url":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit","interfaceLanguage":"swift"},"topicSections":[{"anchor":"Classes","title":"Classes","generated":true,"identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Moov"]},{"identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReader","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderReadResult","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderSession","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/TerminalConfigurationProvider","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/URLSessionProtocol"],"title":"Protocols","generated":true,"anchor":"Protocols"},{"generated":true,"identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Amount","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReadResult","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/PaymentMethodToken","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/PaymentSource","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/StaticTerminalConfigurationProvider"],"anchor":"Structures","title":"Structures"},{"generated":true,"title":"Type Aliases","identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/EventHandler"],"anchor":"Type-Aliases"},{"identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/APIError","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReadError","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderError","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CloudEnvironment","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ImplementationError","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ReaderEvent","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/SDKError","doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/TransactionType"],"generated":true,"anchor":"Enumerations","title":"Enumerations"},{"generated":true,"title":"Extended Modules","anchor":"Extended-Modules","identifiers":["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ProximityReader"]}],"references":{"moov":{"type":"image","variants":[{"url":"\/images\/io.moov.MoovKit\/moov.png","traits":["1x","light"]},{"traits":["1x","dark"],"url":"\/images\/io.moov.MoovKit\/moov~dark.png"}],"alt":"Moov Logo.","identifier":"moov"},"doc://io.moov.MoovKit/documentation/MoovKit/PaymentMethodToken":{"url":"\/documentation\/moovkit\/paymentmethodtoken","kind":"symbol","type":"topic","abstract":[],"navigatorTitle":[{"kind":"identifier","text":"PaymentMethodToken"}],"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"PaymentMethodToken","kind":"identifier"}],"title":"PaymentMethodToken","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/PaymentMethodToken","role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/CardReaderSession":{"url":"\/documentation\/moovkit\/cardreadersession","navigatorTitle":[{"kind":"identifier","text":"CardReaderSession"}],"type":"topic","title":"CardReaderSession","kind":"symbol","role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"CardReaderSession","kind":"identifier"}],"abstract":[{"text":"Defines an abstraction for ","type":"text"},{"code":"PaymentCardReaderSession","type":"codeVoice"},{"type":"text","text":" to enable dependency injection and testing."},{"type":"text","text":" "},{"text":"This allows ","type":"text"},{"type":"codeVoice","code":"PaymentCardReaderSession"},{"text":" to be replaced with mock implementations.","type":"text"}],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderSession"},"doc://io.moov.MoovKit/documentation/MoovKit/Amount":{"navigatorTitle":[{"text":"Amount","kind":"identifier"}],"url":"\/documentation\/moovkit\/amount","title":"Amount","abstract":[],"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Amount"}],"type":"topic","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Amount","kind":"symbol","role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/StaticTerminalConfigurationProvider":{"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"StaticTerminalConfigurationProvider","kind":"identifier"}],"abstract":[],"navigatorTitle":[{"kind":"identifier","text":"StaticTerminalConfigurationProvider"}],"role":"symbol","kind":"symbol","type":"topic","url":"\/documentation\/moovkit\/staticterminalconfigurationprovider","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/StaticTerminalConfigurationProvider","title":"StaticTerminalConfigurationProvider"},"doc://io.moov.MoovKit/documentation/MoovKit/URLSessionProtocol":{"type":"topic","abstract":[],"fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"URLSessionProtocol"}],"kind":"symbol","role":"symbol","title":"URLSessionProtocol","url":"\/documentation\/moovkit\/urlsessionprotocol","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/URLSessionProtocol","navigatorTitle":[{"text":"URLSessionProtocol","kind":"identifier"}]},"doc://io.moov.MoovKit/documentation/MoovKit/CardReadError":{"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReadError","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"CardReadError"}],"fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"CardReadError"}],"abstract":[],"type":"topic","kind":"symbol","url":"\/documentation\/moovkit\/cardreaderror","title":"CardReadError"},"doc://io.moov.MoovKit/documentation/MoovKit/CloudEnvironment":{"role":"symbol","url":"\/documentation\/moovkit\/cloudenvironment","type":"topic","abstract":[],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CloudEnvironment","title":"CloudEnvironment","kind":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"CloudEnvironment"}],"navigatorTitle":[{"kind":"identifier","text":"CloudEnvironment"}]},"doc://io.moov.MoovKit/documentation/MoovKit/ImplementationError":{"url":"\/documentation\/moovkit\/implementationerror","kind":"symbol","type":"topic","abstract":[],"navigatorTitle":[{"text":"ImplementationError","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"kind":"identifier","text":"ImplementationError"}],"title":"ImplementationError","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ImplementationError","role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/CardReader":{"role":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"CardReader","kind":"identifier"}],"title":"CardReader","navigatorTitle":[{"kind":"identifier","text":"CardReader"}],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReader","kind":"symbol","abstract":[{"text":"Defines an abstraction for ","type":"text"},{"type":"codeVoice","code":"PaymentCardReader"},{"text":" to enable dependency injection and testing.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"This allows "},{"code":"PaymentCardReader","type":"codeVoice"},{"text":" to be replaced with mock implementations.","type":"text"}],"url":"\/documentation\/moovkit\/cardreader","type":"topic"},"doc://io.moov.MoovKit/documentation/MoovKit/CardReaderError":{"url":"\/documentation\/moovkit\/cardreadererror","kind":"symbol","type":"topic","abstract":[],"navigatorTitle":[{"text":"CardReaderError","kind":"identifier"}],"fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"CardReaderError"}],"title":"CardReaderError","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderError","role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/CardReadResult":{"fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"text":"CardReadResult","kind":"identifier"}],"navigatorTitle":[{"text":"CardReadResult","kind":"identifier"}],"abstract":[],"role":"symbol","title":"CardReadResult","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReadResult","kind":"symbol","type":"topic","url":"\/documentation\/moovkit\/cardreadresult"},"doc://io.moov.MoovKit/documentation/MoovKit/TerminalConfigurationProvider":{"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"text":"TerminalConfigurationProvider","kind":"identifier"}],"abstract":[{"type":"text","text":"Protocol via card reader token is injected into the SDK."}],"navigatorTitle":[{"text":"TerminalConfigurationProvider","kind":"identifier"}],"role":"symbol","kind":"symbol","type":"topic","url":"\/documentation\/moovkit\/terminalconfigurationprovider","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/TerminalConfigurationProvider","title":"TerminalConfigurationProvider"},"doc://io.moov.MoovKit/documentation/MoovKit/TransactionType":{"fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"text":"TransactionType","kind":"identifier"}],"type":"topic","url":"\/documentation\/moovkit\/transactiontype","title":"TransactionType","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/TransactionType","kind":"symbol","abstract":[],"navigatorTitle":[{"text":"TransactionType","kind":"identifier"}],"role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/CardReaderReadResult":{"navigatorTitle":[{"text":"CardReaderReadResult","kind":"identifier"}],"role":"symbol","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/CardReaderReadResult","url":"\/documentation\/moovkit\/cardreaderreadresult","type":"topic","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"CardReaderReadResult"}],"kind":"symbol","title":"CardReaderReadResult","abstract":[{"text":"Defines an abstraction for ","type":"text"},{"code":"PaymentCardReadResult","type":"codeVoice"},{"text":" to enable dependency injection and testing.","type":"text"},{"type":"text","text":" "},{"text":"This allows ","type":"text"},{"type":"codeVoice","code":"PaymentCardReadResult"},{"text":" to be replaced with mock implementations.","type":"text"}]},"doc://io.moov.MoovKit/documentation/MoovKit":{"url":"\/documentation\/moovkit","kind":"symbol","type":"topic","abstract":[],"title":"MoovKit","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit","role":"collection"},"doc://io.moov.MoovKit/documentation/MoovKit/ProximityReader":{"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ProximityReader","url":"\/documentation\/moovkit\/proximityreader","abstract":[],"title":"ProximityReader","kind":"symbol","role":"collection","type":"topic"},"doc://io.moov.MoovKit/documentation/MoovKit/PaymentSource":{"fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"PaymentSource","kind":"identifier"}],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/PaymentSource","title":"PaymentSource","abstract":[],"kind":"symbol","navigatorTitle":[{"text":"PaymentSource","kind":"identifier"}],"type":"topic","url":"\/documentation\/moovkit\/paymentsource","role":"symbol"},"https://appstoreconnect.apple.com/access/users/sandbox":{"titleInlineContent":[{"type":"text","text":"this page"}],"type":"link","url":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","identifier":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","title":"this page"},"doc://io.moov.MoovKit/documentation/MoovKit/Moov":{"kind":"symbol","type":"topic","role":"symbol","title":"Moov","abstract":[],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Moov","url":"\/documentation\/moovkit\/moov","navigatorTitle":[{"kind":"identifier","text":"Moov"}],"fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"kind":"identifier","text":"Moov"}]},"https://developer.apple.com/apple-pay/sandbox-testing/":{"titleInlineContent":[{"type":"text","text":"this page"}],"type":"link","url":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/","identifier":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/","title":"this page"},"doc://io.moov.MoovKit/documentation/MoovKit/SDKError":{"url":"\/documentation\/moovkit\/sdkerror","kind":"symbol","type":"topic","abstract":[],"navigatorTitle":[{"text":"SDKError","kind":"identifier"}],"fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"SDKError"}],"title":"SDKError","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/SDKError","role":"symbol"},"doc://io.moov.MoovKit/documentation/MoovKit/APIError":{"type":"topic","title":"APIError","url":"\/documentation\/moovkit\/apierror","navigatorTitle":[{"text":"APIError","kind":"identifier"}],"role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"kind":"identifier","text":"APIError"}],"abstract":[{"type":"text","text":"Represents API-related errors that can occur in network requests."}],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/APIError"},"doc://io.moov.MoovKit/documentation/MoovKit/ReaderEvent":{"url":"\/documentation\/moovkit\/readerevent","kind":"symbol","title":"ReaderEvent","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"ReaderEvent","kind":"identifier"}],"role":"symbol","type":"topic","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/ReaderEvent","abstract":[],"navigatorTitle":[{"kind":"identifier","text":"ReaderEvent"}]},"doc://io.moov.MoovKit/documentation/MoovKit/EventHandler":{"title":"EventHandler","kind":"symbol","navigatorTitle":[{"text":"EventHandler","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"text":"EventHandler","kind":"identifier"}],"type":"topic","role":"symbol","abstract":[{"type":"text","text":"Type of event handler function to which the SDK forwards card reader events."}],"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/EventHandler","url":"\/documentation\/moovkit\/eventhandler"}}}