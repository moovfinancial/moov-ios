{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/MoovKit\/documentation\/MoovKit"},"variants":[{"paths":["\/documentation\/moovkit"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"kind":"symbol","metadata":{"role":"collection","roleHeading":"Framework","modules":[{"name":"MoovKit"}],"symbolKind":"module","externalID":"MoovKit","title":"MoovKit"},"topicSections":[{"identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/HostAppConfiguration","doc:\/\/MoovKit\/documentation\/MoovKit\/Moov"],"title":"Classes"},{"identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/CardReader","doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderReadResult","doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderSession","doc:\/\/MoovKit\/documentation\/MoovKit\/TerminalConfigurationProvider"],"title":"Protocols"},{"title":"Structures","identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/CardReadResult","doc:\/\/MoovKit\/documentation\/MoovKit\/PaymentMethodToken","doc:\/\/MoovKit\/documentation\/MoovKit\/StaticTerminalConfigurationProvider"]},{"identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/EventHandler"],"title":"Type Aliases"},{"title":"Enumerations","identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/APIError","doc:\/\/MoovKit\/documentation\/MoovKit\/CardReadError","doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderError","doc:\/\/MoovKit\/documentation\/MoovKit\/CloudEnvironment","doc:\/\/MoovKit\/documentation\/MoovKit\/ReaderEvent","doc:\/\/MoovKit\/documentation\/MoovKit\/SDKError","doc:\/\/MoovKit\/documentation\/MoovKit\/TerminalConfigurationError","doc:\/\/MoovKit\/documentation\/MoovKit\/TransactionType"]},{"title":"Extended Modules","identifiers":["doc:\/\/MoovKit\/documentation\/MoovKit\/ProximityReader"]}],"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","anchor":"overview","level":2},{"type":"row","columns":[{"size":1,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The MoovKit SDK empowers app developers to seamlessly integrate contactless card payment acceptance into their applications using Tap to Pay on iPhone, all supported by the trusted and secure infrastructure of Moov."}]}]},{"content":[{"inlineContent":[{"identifier":"moov","type":"image"}],"type":"paragraph"}],"size":1}],"numberOfColumns":2},{"level":2,"type":"heading","text":"Getting Started","anchor":"Getting-Started"},{"items":[{"content":[{"inlineContent":[{"text":"In your app Target under Frameworks, Libraries and Embedded content make sure that ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"MoovKit"}]},{"type":"text","text":" is set to Embed & Sign."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In Link Binary With Libraries make sure that "},{"type":"emphasis","inlineContent":[{"text":"MoovKit","type":"text"}]},{"type":"text","text":" is listed as a library to link with."}]}]},{"content":[{"inlineContent":[{"text":"Create an entitlements file in the top level of your Xcode project:","type":"text"}],"type":"paragraph"},{"syntax":"xml","code":["<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version=\"1.0\">","<dict>","    <key>com.apple.developer.proximity-reader.payment.acceptance<\/key>","    <true\/>","<\/dict>","<\/plist>"],"type":"codeListing"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Import the SDK in your source:"}]},{"type":"codeListing","code":["    import MoovKit"],"syntax":"swift"}]},{"content":[{"inlineContent":[{"text":"Implement a host app configuration and inject it into a Network service instance.  The host app configuration adds the app bundle ID and app version.","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["    let hostAppVersion: String? = Bundle.main.infoDictionary?[\"CFBundleShortVersionString\"]","    let hostAppID: String? = Bundle.main.bundleIdentifier","","    let networkService = NetworkService(hostAppConfiguration: HostAppConfiguration(appID: hostAppID, appVersion: hostAppVersion), environment: .staging)"]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Implement a terminal configuration provider and inject it into the Moov instance. The terminal configuration will need to be acquired by your backend and sent to your iPhone app. To get you started, you can ask Moov to provide you with a terminal configuration that is valid for 48 hours and you can hardcode it into your application using a static terminal configuration provider."}]},{"type":"codeListing","syntax":"swift","code":["    static let terminalConfigurationProvider = StaticTerminalConfigurationProvider(terminalConfiguration: \"eyJjYXJkUmVhZGVyVG9rZW4iOiJleUpoYkdjaU9pSkZVekkxTmlJc0ltdHBaQ0k2SWpJeE56UmhZamcyTFRCaVpEVXRORGM0TWkxaU56RTJMVEUyWldVd1l6TXpOalptTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKaGRXUWlPaUpqWlhKMGFXWnBZMkYwYVc5dUxYQnZjeTEyTVNJc0ltVjRjQ0k2TVRjek56RTBPVFkyTml3aWFXRjBJam94TnpNMk9UYzJPRFkyTENKcWRHa2lPaUkyT0dSa1pERTRPQzFpTnpaakxUUm1OMk10T1RZME5pMWhPVEUzT1dWaFltTTFPVEFpTENKdFltNGlPaUpEYkdGemMySnZiMnRsY2lJc0ltMWpZeUk2TVRBd01Dd2liV2xrSWpvaU1USXpORFUyTnpnNU1ERXlNelExSWl3aWRIQnBaQ0k2SWpSak9EUXdNREF3TFRBd01EQXRNREF3TUMwd1pESmhMVGxpWXpRMk56TXpZbVpqTmlKOS5aakZlbjFURnNxNUhLR2ZEektienBZLWhpcjVCb3NpSVNGeHNJRzdxTEZZT09vUWNua2tzaWxab2FwM2RNbmU1VXB0bzFuckVQNkZnYjZYQjdZbDFiQSJ9\")","","    let moov = Moov(partnerAccountId: UUID().uuidString.lowercased(), terminalConfigProvider: terminalConfigurationProvider, networkService: networkService)"]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Register an event handler to get notified of events related to Tap to Pay.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    moov.eventHandler = { event  in","        if case .updateProgress(let progress) = event {","            logger.info(\"Event \\(event.rawValue): \\(progress)\")","        } else {","            logger.info(\"Event \\(event.rawValue)\")","        }","    }"]}]},{"content":[{"inlineContent":[{"text":"Initialize a reader.","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["    do {","        let identifier = try await moov.initReader()","        logger.debug(\"identifier \\(String(describing: identifier))\")","    } catch {","        logger.error(\"Failed to fetch identifier\")","    }"]}]},{"content":[{"inlineContent":[{"text":"Create a payment session after the reader is initialized. The session will check if the merchant has already accepted the Terms & Conditions. If not, the T&C view will be presented and needs to be accepted before a tap to pay can be used.","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["    do {","        try await moov.createSession()","        print(\"Session successfully created.\")                ","    } catch {","        showError(message: error.localizedDescription)","    }"],"type":"codeListing"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is how you read a card after a session has been created. The card read returns a payment method token that will be used in an API call to Moovâ€™s transfer creation API endpoint."}]},{"code":["    do {","        let amt = amount","        let paymentMethodToken = try await moov.readCard(","            for: amt,","            currencyCode: \"USD\",","            transactionType: .purchase,","            customerAccountID: UUID().uuidString.lowercased()","        )","        ","        let encoder = JSONEncoder()","        encoder.outputFormatting = .prettyPrinted","        let jsonData = try encoder.encode(paymentMethodToken)","        ","        if let jsonString = String(data: jsonData, encoding: .utf8) {","            logger.debug(\"\\(jsonString)\")","        }","    } catch {","        logger.error(\"Card read error: \\(error)\")","        showError(message: error.localizedDescription)","    }"],"type":"codeListing","syntax":"swift"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In sandbox mode only cards listed on "},{"type":"reference","identifier":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/","isActive":true},{"text":" can be used to test the Tap to Pay functionality with. The card numbers listed on this page can be added to a Wallet app of an iPhone. The iPhone needs to be logged into a Sandbox developer account. To register Sandbox developer account visit ","type":"text"},{"type":"reference","identifier":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","isActive":true},{"type":"text","text":" in the Apple Developer Account of your organization."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Have fun tapping! ðŸŽ‰"}],"type":"paragraph"}]}],"type":"orderedList"}],"kind":"content"}],"hierarchy":{"paths":[[]]},"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://MoovKit/documentation/MoovKit/PaymentMethodToken":{"url":"\/documentation\/moovkit\/paymentmethodtoken","abstract":[],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/PaymentMethodToken","type":"topic","title":"PaymentMethodToken","role":"symbol","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"PaymentMethodToken","kind":"identifier"}],"navigatorTitle":[{"kind":"identifier","text":"PaymentMethodToken"}],"kind":"symbol"},"doc://MoovKit/documentation/MoovKit/CardReader":{"abstract":[{"text":"Defines an abstraction for ","type":"text"},{"type":"codeVoice","code":"PaymentCardReader"},{"type":"text","text":" to enable dependency injection and testing."},{"text":" ","type":"text"},{"text":"This allows ","type":"text"},{"code":"PaymentCardReader","type":"codeVoice"},{"text":" to be replaced with mock implementations.","type":"text"}],"title":"CardReader","url":"\/documentation\/moovkit\/cardreader","navigatorTitle":[{"text":"CardReader","kind":"identifier"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReader","role":"symbol","kind":"symbol","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"CardReader","kind":"identifier"}],"type":"topic"},"doc://MoovKit/documentation/MoovKit/CardReaderReadResult":{"type":"topic","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderReadResult","url":"\/documentation\/moovkit\/cardreaderreadresult","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"CardReaderReadResult","kind":"identifier"}],"abstract":[{"text":"Defines an abstraction for ","type":"text"},{"type":"codeVoice","code":"PaymentCardReadResult"},{"text":" to enable dependency injection and testing.","type":"text"},{"text":" ","type":"text"},{"text":"This allows ","type":"text"},{"type":"codeVoice","code":"PaymentCardReadResult"},{"type":"text","text":" to be replaced with mock implementations."}],"title":"CardReaderReadResult","role":"symbol","kind":"symbol","navigatorTitle":[{"text":"CardReaderReadResult","kind":"identifier"}]},"doc://MoovKit/documentation/MoovKit/StaticTerminalConfigurationProvider":{"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/StaticTerminalConfigurationProvider","abstract":[],"kind":"symbol","type":"topic","title":"StaticTerminalConfigurationProvider","role":"symbol","navigatorTitle":[{"kind":"identifier","text":"StaticTerminalConfigurationProvider"}],"url":"\/documentation\/moovkit\/staticterminalconfigurationprovider","fragments":[{"text":"struct","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"StaticTerminalConfigurationProvider"}]},"doc://MoovKit/documentation/MoovKit/CardReadResult":{"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"CardReadResult","kind":"identifier"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReadResult","role":"symbol","url":"\/documentation\/moovkit\/cardreadresult","abstract":[],"title":"CardReadResult","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CardReadResult"}]},"moov":{"variants":[{"url":"\/images\/moov.png","traits":["1x","light"]},{"url":"\/images\/moov~dark.png","traits":["1x","dark"]}],"alt":"Moov Logo.","identifier":"moov","type":"image"},"doc://MoovKit/documentation/MoovKit/TerminalConfigurationError":{"role":"symbol","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/TerminalConfigurationError","title":"TerminalConfigurationError","abstract":[],"kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"TerminalConfigurationError"}],"type":"topic","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"TerminalConfigurationError"}],"url":"\/documentation\/moovkit\/terminalconfigurationerror"},"https://appstoreconnect.apple.com/access/users/sandbox":{"url":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","identifier":"https:\/\/appstoreconnect.apple.com\/access\/users\/sandbox","type":"link","titleInlineContent":[{"text":"this page","type":"text"}],"title":"this page"},"doc://MoovKit/documentation/MoovKit":{"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit","title":"MoovKit","url":"\/documentation\/moovkit","role":"collection","abstract":[],"type":"topic","kind":"symbol"},"doc://MoovKit/documentation/MoovKit/TerminalConfigurationProvider":{"type":"topic","title":"TerminalConfigurationProvider","url":"\/documentation\/moovkit\/terminalconfigurationprovider","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"kind":"identifier","text":"TerminalConfigurationProvider"}],"abstract":[{"type":"text","text":"Protocol via card reader token is injected to the SDK."}],"navigatorTitle":[{"kind":"identifier","text":"TerminalConfigurationProvider"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/TerminalConfigurationProvider","kind":"symbol","role":"symbol"},"doc://MoovKit/documentation/MoovKit/CardReaderSession":{"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"CardReaderSession"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderSession","role":"symbol","abstract":[{"type":"text","text":"Defines an abstraction for "},{"code":"PaymentCardReaderSession","type":"codeVoice"},{"type":"text","text":" to enable dependency injection and testing."},{"text":" ","type":"text"},{"text":"This allows ","type":"text"},{"type":"codeVoice","code":"PaymentCardReaderSession"},{"text":" to be replaced with mock implementations.","type":"text"}],"url":"\/documentation\/moovkit\/cardreadersession","title":"CardReaderSession","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"CardReaderSession"}]},"doc://MoovKit/documentation/MoovKit/CardReadError":{"role":"symbol","title":"CardReadError","abstract":[],"type":"topic","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReadError","navigatorTitle":[{"kind":"identifier","text":"CardReadError"}],"kind":"symbol","url":"\/documentation\/moovkit\/cardreaderror","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"CardReadError"}]},"doc://MoovKit/documentation/MoovKit/SDKError":{"abstract":[],"url":"\/documentation\/moovkit\/sdkerror","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/SDKError","type":"topic","title":"SDKError","role":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"SDKError"}],"navigatorTitle":[{"text":"SDKError","kind":"identifier"}],"kind":"symbol"},"doc://MoovKit/documentation/MoovKit/EventHandler":{"type":"topic","title":"EventHandler","url":"\/documentation\/moovkit\/eventhandler","fragments":[{"kind":"keyword","text":"typealias"},{"text":" ","kind":"text"},{"kind":"identifier","text":"EventHandler"}],"abstract":[{"type":"text","text":"Type of event handler function to which the SDK forwards card reader events."}],"navigatorTitle":[{"kind":"identifier","text":"EventHandler"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/EventHandler","kind":"symbol","role":"symbol"},"doc://MoovKit/documentation/MoovKit/HostAppConfiguration":{"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/HostAppConfiguration","title":"HostAppConfiguration","abstract":[],"fragments":[{"kind":"keyword","text":"class"},{"text":" ","kind":"text"},{"text":"HostAppConfiguration","kind":"identifier"}],"type":"topic","role":"symbol","navigatorTitle":[{"text":"HostAppConfiguration","kind":"identifier"}],"url":"\/documentation\/moovkit\/hostappconfiguration","kind":"symbol"},"doc://MoovKit/documentation/MoovKit/TransactionType":{"kind":"symbol","type":"topic","role":"symbol","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/TransactionType","navigatorTitle":[{"text":"TransactionType","kind":"identifier"}],"url":"\/documentation\/moovkit\/transactiontype","abstract":[],"title":"TransactionType","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"TransactionType"}]},"doc://MoovKit/documentation/MoovKit/Moov":{"title":"Moov","url":"\/documentation\/moovkit\/moov","kind":"symbol","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/Moov","abstract":[],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Moov","kind":"identifier"}],"role":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Moov"}]},"doc://MoovKit/documentation/MoovKit/CloudEnvironment":{"navigatorTitle":[{"kind":"identifier","text":"CloudEnvironment"}],"title":"CloudEnvironment","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"CloudEnvironment"}],"type":"topic","kind":"symbol","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CloudEnvironment","abstract":[],"url":"\/documentation\/moovkit\/cloudenvironment","role":"symbol"},"doc://MoovKit/documentation/MoovKit/ProximityReader":{"role":"collection","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/ProximityReader","title":"ProximityReader","abstract":[],"kind":"symbol","type":"topic","url":"\/documentation\/moovkit\/proximityreader"},"doc://MoovKit/documentation/MoovKit/CardReaderError":{"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/CardReaderError","title":"CardReaderError","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"text":"CardReaderError","kind":"identifier"}],"abstract":[],"navigatorTitle":[{"text":"CardReaderError","kind":"identifier"}],"role":"symbol","type":"topic","kind":"symbol","url":"\/documentation\/moovkit\/cardreadererror"},"doc://MoovKit/documentation/MoovKit/APIError":{"type":"topic","title":"APIError","url":"\/documentation\/moovkit\/apierror","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"text":"APIError","kind":"identifier"}],"abstract":[],"navigatorTitle":[{"kind":"identifier","text":"APIError"}],"identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/APIError","kind":"symbol","role":"symbol"},"doc://MoovKit/documentation/MoovKit/ReaderEvent":{"abstract":[],"role":"symbol","identifier":"doc:\/\/MoovKit\/documentation\/MoovKit\/ReaderEvent","kind":"symbol","url":"\/documentation\/moovkit\/readerevent","navigatorTitle":[{"text":"ReaderEvent","kind":"identifier"}],"fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"ReaderEvent"}],"type":"topic","title":"ReaderEvent"},"https://developer.apple.com/apple-pay/sandbox-testing/":{"identifier":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/","url":"https:\/\/developer.apple.com\/apple-pay\/sandbox-testing\/","titleInlineContent":[{"type":"text","text":"this page"}],"type":"link","title":"this page"}}}