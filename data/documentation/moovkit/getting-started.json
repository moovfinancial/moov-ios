{"hierarchy":{"paths":[["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit"]]},"metadata":{"title":"Getting Started","modules":[{"name":"MoovKit"}],"roleHeading":"Article","role":"article"},"variants":[{"paths":["\/documentation\/moovkit\/getting-started"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/moovkit\/getting-started"],"traits":[{"interfaceLanguage":"occ"}]}],"sections":[],"identifier":{"url":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Getting-Started","interfaceLanguage":"swift"},"kind":"article","schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"text":"This guide walks you through the steps to integrate ","type":"text"},{"inlineContent":[{"text":"MoovKit","type":"text"}],"type":"strong"},{"text":" into your iOS application to support ","type":"text"},{"inlineContent":[{"type":"text","text":"Tap to Pay on iPhone"}],"type":"strong"},{"text":".","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"overview","type":"heading","level":2},{"type":"thematicBreak"},{"text":"Project Setup","anchor":"Project-Setup","type":"heading","level":2},{"type":"aside","name":"Note","content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Important","type":"text"}]},{"type":"text","text":": The examples provided here have been deliberately simplified and are intended for illustrative purposes only."}]}],"style":"note"},{"text":"1. Add Package Dependency","anchor":"1-Add-Package-Dependency","type":"heading","level":3},{"inlineContent":[{"type":"text","text":"Add the MoovKit SDK to your project via Swift Package Manager:"}],"type":"paragraph"},{"code":["https:\/\/github.com\/moovfinancial\/moov-ios"],"type":"codeListing","syntax":null},{"text":"2. Embed Framework","anchor":"2-Embed-Framework","type":"heading","level":3},{"inlineContent":[{"text":"In your app target settings, under ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Frameworks, Libraries, and Embedded Content"}]},{"text":", set ","type":"text"},{"type":"emphasis","inlineContent":[{"type":"text","text":"MoovKit"}]},{"text":" to ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Embed & Sign"}]},{"text":".","type":"text"},{"text":"\n","type":"text"},{"identifier":"embed_sign","type":"image"}],"type":"paragraph"},{"text":"3. Link Binary","anchor":"3-Link-Binary","type":"heading","level":3},{"inlineContent":[{"text":"Ensure ","type":"text"},{"inlineContent":[{"text":"MoovKit","type":"text"}],"type":"emphasis"},{"text":" is listed under ","type":"text"},{"inlineContent":[{"text":"Link Binary With Libraries","type":"text"}],"type":"strong"},{"text":".","type":"text"},{"text":"\n","type":"text"},{"identifier":"link_binary","type":"image"}],"type":"paragraph"},{"anchor":"4-Add-Entitlements","type":"heading","level":3,"text":"4. Add Entitlements"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create an entitlements file at the root of your Xcode project and include the following:"}]},{"type":"codeListing","syntax":null,"code":["```xml","<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version=\"1.0\">","<dict>","    <key>com.apple.developer.proximity-reader.payment.acceptance<\/key>","    <true\/>","<\/dict>","<\/plist>","```"]},{"anchor":"5-Import-MoovKit","type":"heading","level":3,"text":"5. Import MoovKit"},{"type":"paragraph","inlineContent":[{"text":"In your Swift source:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["import MoovKit"]},{"anchor":"6-Configure-Terminal-Provider","type":"heading","level":3,"text":"6. Configure Terminal Provider"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Implement a terminal configuration provider and inject it into your "},{"type":"codeVoice","code":"Moov"},{"type":"text","text":" instance. Moov provides a static configuration valid for 48 hours. You can use this static configuration for development while your backend integration with the Moov platform is in progress:"}]},{"type":"codeListing","syntax":"swift","code":["    static let terminalConfigurationProvider = StaticTerminalConfigurationProvider(terminalConfiguration: \"eyJjYXJkUmVhZGVyVG9rZW4iOiJleUpoYkdjaU9pSkZVekkxTmlJc0ltdHBaQ0k2SWpJeE56UmhZamcyTFRCaVpEVXRORGM0TWkxaU56RTJMVEUyWldVd1l6TXpOalptTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKaGRXUWlPaUpqWlhKMGFXWnBZMkYwYVc5dUxYQnZjeTEyTVNJc0ltVjRjQ0k2TVRjek56RTBPVFkyTml3aWFXRjBJam94TnpNMk9UYzJPRFkyTENKcWRHa2lPaUkyT0dSa1pERTRPQzFpTnpaakxUUm1OMk10T1RZME5pMWhPVEUzT1dWaFltTTFPVEFpTENKdFltNGlPaUpEYkdGemMySnZiMnRsY2lJc0ltMWpZeUk2TVRBd01Dd2liV2xrSWpvaU1USXpORFUyTnpnNU1ERXlNelExSWl3aWRIQnBaQ0k2SWpSak9EUXdNREF3TFRBd01EQXRNREF3TUMwd1pESmhMVGxpWXpRMk56TXpZbVpqTmlKOS5aakZlbjFURnNxNUhLR2ZEektienBZLWhpcjVCb3NpSVNGeHNJRzdxTEZZT09vUWNua2tzaWxab2FwM2RNbmU1VXB0bzFuckVQNkZnYjZYQjdZbDFiQSJ9\")","","    let moov = Moov(partnerAccountId: partnerAccountID, terminalConfigProvider: terminalConfigurationProvider)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For production use, fetch the configuration from your backend. Below is a sample implementation, assuming "},{"code":"PartnerClient","type":"codeVoice"},{"type":"text","text":" is implemented to interact with your backend API:"}]},{"type":"codeListing","syntax":"swift","code":["import Foundation","import PartnerClient","import os","","class TerminalConfigProvider: TerminalConfigurationProvider {","    ","    let logger = Logger(subsystem: Bundle.main.bundleIdentifier!, category: \"main\")","    ","    var terminalConfiguration: String {","        get async throws {","            return try await fetch(terminalApplicationID: UUID(uuidString: \"7922ce07-daf3-48f2-aab3-ed878c76a1a3\")!)","        }","    }","","    let partnerClient: PartnerClient","    let partnerAccountID: UUID","    let merchantAccountID: UUID","","    public init(partnerClient: PartnerClient, partnerAccountID: UUID, merchantAccountID: UUID) {","        self.partnerClient = partnerClient","        self.partnerAccountID = partnerAccountID","        self.merchantAccountID = merchantAccountID","    }","","    func fetch(terminalApplicationID: UUID) async throws -> String {","        do {            ","            let terminalConfig = try await partnerClient.getTerminalConfiguration(","                accountID: merchantAccountID,","                terminalApplicationID: terminalApplicationID","            )","            return terminalConfig.configuration","        } catch {","            logger.error(\"\\(error)\")","            throw error","        }","    }","","}"]},{"anchor":"7-Register-Event-Handler","type":"heading","level":3,"text":"7. Register Event Handler"},{"type":"paragraph","inlineContent":[{"text":"Set up an event handler to monitor initialization progress and other Tap to Pay events:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    moov.setEventHandler(eventHandler: { event in","        if case .updateProgress(let progress) = event {","            logger.info(\"Event \\(event.rawValue): \\(progress)\")","        } else {","            logger.info(\"Event \\(event.rawValue)\")","        }","    })"]},{"anchor":"8-Register-Telemetry-Collector","type":"heading","level":3,"text":"8. Register Telemetry Collector"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Register a telemetry collector to observe the operation of MoovKit. Routing events through the applicationâ€™s logging framework is recommended."},{"type":"text","text":" "},{"type":"text","text":"The application developer is responsible for implementing the functionality required to collect log data from devices."},{"type":"text","text":" "},{"type":"text","text":"Moov is able to provide diagnostic assistance for SDK-related issues only when telemetry data is available. To request support, contact support@moov.io"},{"type":"text","text":" "},{"type":"text","text":"and include the collected telemetry along with a detailed description of the issue."}]},{"type":"codeListing","syntax":"swift","code":["    moov.setTelemetryCollector(collector: { event, attribs in","        guard let attributes = attribs else {","            logger.info(\"\\(event)\")","            return","        }","        logger.info(\"\\(event) \\(attributes)\")","    })"]},{"anchor":"9-Initialize-Reader","type":"heading","level":3,"text":"9. Initialize Reader"},{"type":"paragraph","inlineContent":[{"text":"Initialize the reader hardware:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    do {","        let identifier = try await moov.initReader()","        logger.debug(\"identifier \\(String(describing: identifier))\")","    } catch {","        logger.error(\"Failed to fetch identifier\")","    }"]},{"anchor":"10-Create-Payment-Session","type":"heading","level":3,"text":"10. Create Payment Session"},{"type":"paragraph","inlineContent":[{"text":"Start a session after initializing the reader. If terms and conditions havenâ€™t been accepted, the UI will prompt the merchant:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    do {","        try await moov.createSession()","        print(\"Session successfully created.\")                ","    } catch {","        showError(message: error.localizedDescription)","    }"]},{"anchor":"11-Read-a-Card","type":"heading","level":3,"text":"11. Read a Card"},{"type":"paragraph","inlineContent":[{"type":"text","text":"After a session is created, read the payment card and obtain a token for transaction processing:"}]},{"type":"codeListing","syntax":"swift","code":["    do {","        let amt = Decimal(1.23)","        let authResponse = try await moov.createTapAuthorization(","            for: amount,","            currencyCode: CurrencyCode.USD,","            transactionType: .purchase,","            customerAccountID: UUID()","        )","        ","        \/\/ send authResponse.paymentToken to your backend to create a transfer","    } catch {","        logger.error(\"Card read error: \\(error)\")","        showError(message: error.localizedDescription)","    }"]},{"anchor":"12-Cleanup","type":"heading","level":3,"text":"12. Cleanup"},{"type":"paragraph","inlineContent":[{"type":"text","text":"When the app moves to the background or when you need to release the MoovKit instance, it is important to close the reader to inform the operating system that the app has finished reading cards."}]},{"type":"codeListing","syntax":"swift","code":["   await self.moov.closeReader() "]},{"type":"paragraph","inlineContent":[{"text":"When the app returns to the foreground and a ","type":"text"},{"type":"codeVoice","code":"MoovKit"},{"text":" instance already exists in memory, ","type":"text"},{"isActive":true,"identifier":"#9-Initialize-Reader","type":"reference"},{"text":" and ","type":"text"},{"isActive":true,"identifier":"#10-Create-Payment-Session","type":"reference"},{"text":".","type":"text"}]},{"anchor":"Youre-Ready-to-Tap-%F0%9F%8E%89","type":"heading","level":2,"text":"Youâ€™re Ready to Tap ðŸŽ‰"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app is now integrated with MoovKit and Tap to Pay on iPhone. Happy tapping!"}]}]}],"references":{"doc://io.moov.MoovKit/documentation/MoovKit":{"identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit","role":"collection","title":"MoovKit","type":"topic","abstract":[],"kind":"symbol","url":"\/documentation\/moovkit"},"link_binary":{"variants":[{"traits":["1x","light"],"url":"\/images\/io.moov.MoovKit\/link_binary.png"}],"type":"image","identifier":"link_binary","alt":"Link binary with libraries"},"#10-Create-Payment-Session":{"identifier":"#10-Create-Payment-Session","title":"create a new payment session","titleInlineContent":[{"text":"create a new payment session","type":"text"}],"url":"#10-Create-Payment-Session","type":"link"},"embed_sign":{"variants":[{"traits":["1x","light"],"url":"\/images\/io.moov.MoovKit\/embed_sign.png"}],"type":"image","identifier":"embed_sign","alt":"Embed framework"},"#9-Initialize-Reader":{"identifier":"#9-Initialize-Reader","title":"reinitialize the reader","titleInlineContent":[{"text":"reinitialize the reader","type":"text"}],"url":"#9-Initialize-Reader","type":"link"}},"variantOverrides":[{"patch":[{"path":"\/identifier\/interfaceLanguage","value":"occ","op":"replace"},{"path":"\/topicSections","value":null,"op":"add"},{"path":"\/seeAlsoSections","value":null,"op":"add"}],"traits":[{"interfaceLanguage":"occ"}]}]}