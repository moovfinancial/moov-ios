{"primaryContentSections":[{"kind":"content","content":[{"level":2,"anchor":"overview","type":"heading","text":"Overview"},{"type":"thematicBreak"},{"level":2,"anchor":"Project-Setup","type":"heading","text":"Project Setup"},{"style":"note","content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Important","type":"text"}]},{"type":"text","text":": The examples provided here have been deliberately simplified and are intended for illustrative purposes only."}],"type":"paragraph"}],"type":"aside","name":"Note"},{"level":3,"anchor":"1-Add-Package-Dependency","type":"heading","text":"1. Add Package Dependency"},{"type":"paragraph","inlineContent":[{"text":"Add the MoovKit SDK to your project via Swift Package Manager:","type":"text"}]},{"type":"codeListing","syntax":null,"code":["https:\/\/github.com\/moovfinancial\/moov-ios"]},{"level":3,"anchor":"2-Embed-Framework","type":"heading","text":"2. Embed Framework"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In your app target settings, under "},{"type":"strong","inlineContent":[{"type":"text","text":"Frameworks, Libraries, and Embedded Content"}]},{"type":"text","text":", set "},{"type":"emphasis","inlineContent":[{"type":"text","text":"MoovKit"}]},{"type":"text","text":" to "},{"type":"strong","inlineContent":[{"text":"Embed & Sign","type":"text"}]},{"type":"text","text":"."},{"type":"text","text":"\n"},{"type":"image","identifier":"embed_sign"}]},{"level":3,"anchor":"3-Link-Binary","type":"heading","text":"3. Link Binary"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Ensure "},{"type":"emphasis","inlineContent":[{"text":"MoovKit","type":"text"}]},{"type":"text","text":" is listed under "},{"type":"strong","inlineContent":[{"type":"text","text":"Link Binary With Libraries"}]},{"type":"text","text":"."},{"type":"text","text":"\n"},{"type":"image","identifier":"link_binary"}]},{"type":"heading","text":"4. Add Entitlements","anchor":"4-Add-Entitlements","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Create an entitlements file at the root of your Xcode project and include the following:"}]},{"type":"codeListing","syntax":null,"code":["```xml","<?xml version=\"1.0\" encoding=\"UTF-8\"?>","<!DOCTYPE plist PUBLIC \"-\/\/Apple\/\/DTD PLIST 1.0\/\/EN\" \"http:\/\/www.apple.com\/DTDs\/PropertyList-1.0.dtd\">","<plist version=\"1.0\">","<dict>","    <key>com.apple.developer.proximity-reader.payment.acceptance<\/key>","    <true\/>","<\/dict>","<\/plist>","```"]},{"type":"heading","text":"5. Import MoovKit","anchor":"5-Import-MoovKit","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"In your Swift source:"}]},{"type":"codeListing","syntax":"swift","code":["import MoovKit"]},{"type":"heading","text":"6. Configure Terminal Provider","anchor":"6-Configure-Terminal-Provider","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Implement a terminal configuration provider and inject it into your "},{"type":"codeVoice","code":"Moov"},{"type":"text","text":" instance. Moov provides a static configuration valid for 48 hours. You can use this static configuration for development while your backend integration with the Moov platform is in progress:"}]},{"type":"codeListing","syntax":"swift","code":["    static let terminalConfigurationProvider = StaticTerminalConfigurationProvider(terminalConfiguration: \"eyJjYXJkUmVhZGVyVG9rZW4iOiJleUpoYkdjaU9pSkZVekkxTmlJc0ltdHBaQ0k2SWpJeE56UmhZamcyTFRCaVpEVXRORGM0TWkxaU56RTJMVEUyWldVd1l6TXpOalptTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKaGRXUWlPaUpqWlhKMGFXWnBZMkYwYVc5dUxYQnZjeTEyTVNJc0ltVjRjQ0k2TVRjek56RTBPVFkyTml3aWFXRjBJam94TnpNMk9UYzJPRFkyTENKcWRHa2lPaUkyT0dSa1pERTRPQzFpTnpaakxUUm1OMk10T1RZME5pMWhPVEUzT1dWaFltTTFPVEFpTENKdFltNGlPaUpEYkdGemMySnZiMnRsY2lJc0ltMWpZeUk2TVRBd01Dd2liV2xrSWpvaU1USXpORFUyTnpnNU1ERXlNelExSWl3aWRIQnBaQ0k2SWpSak9EUXdNREF3TFRBd01EQXRNREF3TUMwd1pESmhMVGxpWXpRMk56TXpZbVpqTmlKOS5aakZlbjFURnNxNUhLR2ZEektienBZLWhpcjVCb3NpSVNGeHNJRzdxTEZZT09vUWNua2tzaWxab2FwM2RNbmU1VXB0bzFuckVQNkZnYjZYQjdZbDFiQSJ9\")","","    let moov = Moov(partnerAccountId: partnerAccountID, terminalConfigProvider: terminalConfigurationProvider)"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"For production use, fetch the configuration from your backend. Below is a sample implementation, assuming "},{"type":"codeVoice","code":"PartnerClient"},{"type":"text","text":" is implemented to interact with your backend API:"}]},{"type":"codeListing","syntax":"swift","code":["import Foundation","import PartnerClient","import os","","class TerminalConfigProvider: TerminalConfigurationProvider {","    ","    let logger = Logger(subsystem: Bundle.main.bundleIdentifier!, category: \"main\")","    ","    var terminalConfiguration: String {","        get async throws {","            return try await fetch(terminalApplicationID: UUID(uuidString: \"7922ce07-daf3-48f2-aab3-ed878c76a1a3\")!)","        }","    }","","    let partnerClient: PartnerClient","    let partnerAccountID: UUID","    let merchantAccountID: UUID","","    public init(partnerClient: PartnerClient, partnerAccountID: UUID, merchantAccountID: UUID) {","        self.partnerClient = partnerClient","        self.partnerAccountID = partnerAccountID","        self.merchantAccountID = merchantAccountID","    }","","    func fetch(terminalApplicationID: UUID) async throws -> String {","        do {            ","            let terminalConfig = try await partnerClient.getTerminalConfiguration(","                accountID: merchantAccountID,","                terminalApplicationID: terminalApplicationID","            )","            return terminalConfig.configuration","        } catch {","            logger.error(\"\\(error)\")","            throw error","        }","    }","","}"]},{"type":"heading","text":"7. Register Event Handler","anchor":"7-Register-Event-Handler","level":3},{"type":"paragraph","inlineContent":[{"text":"Set up an event handler to monitor initialization progress and other Tap to Pay events:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    moov.setEventHandler(eventHandler: { event in","        if case .updateProgress(let progress) = event {","            logger.info(\"Event \\(event.rawValue): \\(progress)\")","        } else {","            logger.info(\"Event \\(event.rawValue)\")","        }","    })"]},{"type":"heading","text":"8. Register Telemetry Collector","anchor":"8-Register-Telemetry-Collector","level":3},{"type":"paragraph","inlineContent":[{"text":"Register a telemetry collector to observe the operation of MoovKit. Routing events through the applicationâ€™s logging framework is recommended.","type":"text"},{"text":" ","type":"text"},{"text":"The application developer is responsible for implementing the functionality required to collect log data from devices.","type":"text"},{"text":" ","type":"text"},{"text":"Moov is able to provide diagnostic assistance for SDK-related issues only when telemetry data is available. To request support, contact support@moov.io","type":"text"},{"text":" ","type":"text"},{"text":"and include the collected telemetry along with a detailed description of the issue.","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    moov.setTelemetryCollector(collector: { event, attribs in","        guard let attributes = attribs else {","            logger.info(\"\\(event)\")","            return","        }","        logger.info(\"\\(event) \\(attributes)\")","    })"]},{"type":"heading","text":"9. Initialize Reader","anchor":"9-Initialize-Reader","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Initialize the reader hardware:"}]},{"type":"codeListing","syntax":"swift","code":["    do {","        let identifier = try await moov.initReader()","        logger.debug(\"identifier \\(String(describing: identifier))\")","    } catch {","        logger.error(\"Failed to fetch identifier\")","    }"]},{"type":"heading","text":"10. Create Payment Session","anchor":"10-Create-Payment-Session","level":3},{"type":"paragraph","inlineContent":[{"text":"Start a session after initializing the reader. If terms and conditions havenâ€™t been accepted, the UI will prompt the merchant:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["    do {","        try await moov.createSession()","        print(\"Session successfully created.\")                ","    } catch {","        showError(message: error.localizedDescription)","    }"]},{"type":"heading","text":"11. Read a Card","anchor":"11-Read-a-Card","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"After a session is created, read the payment card and obtain a token for transaction processing:"}]},{"type":"codeListing","syntax":null,"code":["```swift","    do {","        let amt = Decimal(1.23)","        let authResponse = try await moov.createTapAuthorization(","            for: amount,","            currencyCode: CurrencyCode.USD,","            transactionType: .purchase,","            customerAccountID: UUID()","        )","        ","        \/\/ send authResponse.paymentToken to your backend to create a transfer","    } catch {","        logger.error(\"Card read error: \\(error)\")","        showError(message: error.localizedDescription)","    }","```"]},{"type":"heading","text":"Youâ€™re Ready to Tap ðŸŽ‰","anchor":"Youre-Ready-to-Tap-%F0%9F%8E%89","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"Your app is now integrated with MoovKit and Tap to Pay on iPhone. Happy tapping!"}]}]}],"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/io.moov.MoovKit\/documentation\/MoovKit"]]},"kind":"article","variants":[{"paths":["\/documentation\/moovkit\/getting-started"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/moovkit\/getting-started"],"traits":[{"interfaceLanguage":"occ"}]}],"abstract":[{"type":"text","text":"This guide walks you through the steps to integrate "},{"type":"strong","inlineContent":[{"type":"text","text":"MoovKit"}]},{"type":"text","text":" into your iOS application to support "},{"type":"strong","inlineContent":[{"text":"Tap to Pay on iPhone","type":"text"}]},{"type":"text","text":"."}],"identifier":{"url":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit\/Getting-Started","interfaceLanguage":"swift"},"sections":[],"metadata":{"roleHeading":"Article","modules":[{"name":"MoovKit"}],"role":"article","title":"Getting Started"},"references":{"link_binary":{"alt":"Link binary with libraries","variants":[{"traits":["1x","light"],"url":"\/images\/io.moov.MoovKit\/link_binary.png"}],"type":"image","identifier":"link_binary"},"doc://io.moov.MoovKit/documentation/MoovKit":{"type":"topic","abstract":[],"kind":"symbol","title":"MoovKit","role":"collection","url":"\/documentation\/moovkit","identifier":"doc:\/\/io.moov.MoovKit\/documentation\/MoovKit"},"embed_sign":{"alt":"Embed framework","variants":[{"traits":["1x","light"],"url":"\/images\/io.moov.MoovKit\/embed_sign.png"}],"type":"image","identifier":"embed_sign"}},"variantOverrides":[{"patch":[{"op":"replace","path":"\/identifier\/interfaceLanguage","value":"occ"},{"op":"add","path":"\/topicSections","value":null},{"op":"add","path":"\/seeAlsoSections","value":null}],"traits":[{"interfaceLanguage":"occ"}]}]}